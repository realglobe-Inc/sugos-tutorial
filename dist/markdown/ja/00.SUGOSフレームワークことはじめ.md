# 【SUGOS】チュートリアル001: SUGOSことはじめ


### これはなんですか

[SUGOS](https://github.com/realglobe-Inc/sugos)とは

+ RPC(Remote Procedure Call)フレームワーク
+ モジュール定義を動的に共有することで、ネットワーク透過的な関数呼び出しを実現する
+ 主に[Node.js](https://nodejs.org/en/)で実装されている
+ [EventEmitter]()形式による双方向通信をサポート
+ [株式会社リアルグローブ](http://realglobe.jp/)が開発


### できること

SUGOSを使うと、あるクライアント上で定義した関数が、他のクライアントからいきなり使えるようになります。

<img src="../../images/sugos-overview.png"
     alt="Overview"
/>


例えば、宣言側クライアント（Actor) に置いて

+ メソッドを持つモジュールを宣言 ( `tableTennis#ping` )
+ クライアント名(key)を宣言し、hubサーバに接続 ( `my-actor-01@example.sugo-hub.com` )

```javascript
'use strict'

const co = require('co')
const sugoActor = require('sugo-actor')
const { Module } = sugoActor

co(function * () {
  // Define a module with methods
  let tableTennis = new Module({
    ping (pong) {
      return `"${pong}" from actor!`
    }
  })

  // Create an actor client instance
  let actor = sugoActor({
    host: 'example.sugo-hub.com',
    key: 'my-actor-01',
    modules: { tableTennis }
  })

  // Connect to hub server
  yield actor.connect()
}).catch((err) => console.error(err))

```

すると、

同じhubサーバに接続した呼び出し側クライアント (Caller)がActorにアクセスできるようになります。


```javascript
'use strict'

const sugoCaller = require('sugo-caller')
const co = require('co')

co(function * () {
  let caller = sugoCaller({
    host: 'example.sugo-hub.com'
  })
  // Connect to an actor with key
  let actor01 = yield caller.connect('my-actor-01')

  {
    // Get a module of the actor
    let tableTennis = actor01.get('tableTennis')
    let pong = yield tableTennis.ping('hey!')
    console.log(pong) // -> `"hey!" from call!`
  }
}).catch((err) => console.error(err))

```

メソッド呼び出しは基本的にJavascriptの[Promise](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise)を介して行われ、
ネットワーク越してあることをあまり意識せずに使えるようになっています


また、一方的な関数呼び出しだけではなく、 Node.jsの[EventEmitter](https://nodejs.org/api/events.html#events_events)を用いたイベント通知もサポートしています。



### どういう仕組みか

基本的には[Socket.IO](http://socket.io/)のラッパーです。

+ 中央サーバである[SUGO-Hub](https://github.com/realglobe-Inc/sugo-hub)がWebSocket通信で、定義の共有や命令の中継を行なう
+ 提供側クライアントである[SUGO-Actor](https://github.com/realglobe-Inc/sugo-actor)が、モジュール定義の通知や、命令実行を行なう
+ 実行側クライアントである[SUGO-Caller](https://github.com/realglobe-Inc/sugo-actor)が、モジュール定義に沿って動的生成や、命令の呼び出しを行なう





